# Render manifest to create backend service for ConnectGlobal
# See https://render.com/docs/deploy-configuration for schema
services:
  - type: web
    name: connectglobal-backend
    env: python
    region: oregon
    repo: https://github.com/lukegordos/ConnectGlobal
    branch: main
    root: backend
    # requirements.txt is in the repo root; when Render runs from backend/ use ../requirements.txt
    buildCommand: pip install -r ../requirements.txt
    # Use uvicorn directly to avoid 'gunicorn: command not found' issues in some build images.
    # Uvicorn is installed in the virtual environment and can be run via python -m to ensure the correct interpreter.
    startCommand: python -m uvicorn app:app --host 0.0.0.0 --port $PORT
    autoDeploy: true
    plan: free
